{"version":3,"file":"index.js","sources":["../src/main.js"],"sourcesContent":["// Kütüphaneler\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport axios from 'axios';\n\n// DOM Referansları\nconst form = document.querySelector('#search-form');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('#load-more');\n\nlet currentQuery = '';\nlet page = 1;\nlet perPage = 40;\nlet totalHits = 0;\n\nconst API_KEY = '53911590-e6659ac7d11975246b1e78aef';\nconst BASE_URL = 'https://pixabay.com/api/';\n\n// SimpleLightbox oluşturup biçimlendirmek için\nlet lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\n// Event listeners\nform.addEventListener('submit', onSearch);\nloadMoreBtn.addEventListener('click', onLoadMore);\n// Arama fonksiyonu\nasync function onSearch(event) {\n  event.preventDefault();\n  const query = event.target.elements.query.value.trim();\n  \n  // Eğer veri boşsa uyarı mesajı\n  if (!query) {\n    return iziToast.warning({\n      title: 'Warning',\n      message: 'Please enter a search term!',\n      position: 'topRight',\n    });\n  }\n\n  // Yeni arama\n  currentQuery = query;\n  page = 1;\n  gallery.innerHTML = '';\n  loadMoreBtn.classList.add('is-hidden');\n  loader.style.display = 'block';\n\n  try {\n    const data = await fetchImages();\n    totalHits = data.totalHits;\n\n    if (data.hits.length === 0) {\n      return iziToast.error({\n        message: 'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n    }\n\n    renderGallery(data.hits);\n    toggleLoadMore();\n\n  } catch (error) {\n    console.error(error);\n    iziToast.error({\n      message: 'Failed to fetch images.',\n      position: 'topRight',\n    });\n  } finally {\n    loader.style.display = 'none';\n    form.reset();\n  }\n}\n\n// Daha fazla yükle fonksiyonu\nasync function onLoadMore() {\n  page += 1;\n  loadMoreBtn.disabled = true;\n  loader.style.display = 'block';\n\n  try {\n    const data = await fetchImages();\n    renderGallery(data.hits);\n    smoothScroll();\n    toggleLoadMore();\n  } catch (error) {\n    console.error(error);\n    iziToast.error({\n      message: 'Failed to load more images.',\n      position: 'topRight',\n    });\n  } finally {\n    loader.style.display = 'none';\n    loadMoreBtn.disabled = false;\n  }\n}\n\n// Resimleri getir fonksiyonu\nasync function fetchImages() {\n  const params = {\n    key: API_KEY,\n    q: currentQuery,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: page,\n    per_page: perPage,\n  };\n\n  const response = await axios.get(BASE_URL, { params });\n  return response.data;\n}\n\n// Galeriyi görüntüle fonksiyonu\nfunction renderGallery(images) {\n  const markup = images.map(createMarkup).join('');\n  gallery.insertAdjacentHTML('beforeend', markup);\n  lightbox.refresh();\n}\n\n// Markup oluşturma fonksiyonu\nfunction createMarkup({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) {\n  return `\n    <li class=\"gallery-item\">\n      <a class=\"gallery-link\" href=\"${largeImageURL}\">\n        <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" />\n      </a>\n      <div class=\"info\">\n        <p><b>Likes</b> ${likes}</p>\n        <p><b>Views</b> ${views}</p>\n        <p><b>Comments</b> ${comments}</p>\n        <p><b>Downloads</b> ${downloads}</p>\n      </div>\n    </li>\n  `;\n}\n\n// Daha fazlasını yükle fonksiyonu\nfunction toggleLoadMore() {\n  const shown = page * perPage;\n  if (shown >= totalHits) {\n    loadMoreBtn.classList.add('is-hidden'); // gizle\n    // info mesajı\n    if (totalHits > 0) {\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n    }\n  } else {\n    loadMoreBtn.classList.remove('is-hidden'); // göster\n  }\n}\n\n// smooth kaydırma fonksiyonu\nfunction smoothScroll() {\n  const firstCard = gallery.firstElementChild;\n  if (!firstCard) return;\n  const cardHeight = firstCard.getBoundingClientRect().height;\n  window.scrollBy({ top: cardHeight * 2, behavior: 'smooth' });\n}"],"names":["form","gallery","loader","loadMoreBtn","currentQuery","page","perPage","totalHits","API_KEY","BASE_URL","lightbox","SimpleLightbox","onSearch","onLoadMore","event","query","iziToast","data","fetchImages","renderGallery","toggleLoadMore","error","smoothScroll","params","axios","images","markup","createMarkup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","firstCard","cardHeight"],"mappings":"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"}